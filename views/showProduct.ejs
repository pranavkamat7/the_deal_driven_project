<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <title>
    <%= product.name %>
  </title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Common CSS -->
  <link rel="stylesheet" href="/home.css" />
  <link rel="stylesheet" href="/footer.css" />
  <link rel="stylesheet" href="/product.css" />
  <link rel="icon" href="/favicon.png" type="image/x-icon" />

</head>

<body>
  <div id="loadingOverlay">
    <div class="loader-box">
      <div class="spinner"></div>
      <h5>Just a moment ✨</h5>
      <p>Something good is opening for you</p>
      <span id="countdown">5</span>
    </div>
  </div>
   <div class="page-container">
   
 <%- include("navbar") %>
    <div class="container product-container my-5">
      

      <div class="row g-4">

        <!-- Image -->
        <div class="col-md-6">
          <img src="<%= product.image %>" class="img-fluid rounded shadow product-image" alt="<%= product.name %>">

        </div>

        <!-- Details -->
        <div class="col-md-6">
          <h2 class="fw-bold">
            <%= product.name %>
          </h2>
          <p class="text-muted">
            <%= product.category %>
          </p>

          <h4 class="text-success my-3">₹ <%= product.price %>
          </h4>

          <p>
            <%= product.description %>
          </p>

          <a href="<%= product.link %>" target="_blank" class="btn btn-primary btn-lg w-100">
            Buy Now
          </a>
        </div>

      </div>
    </div>

    <%- include("./footer") %>
    </div>
    <script>
    const overlay = document.getElementById("loadingOverlay");
    const countdownEl = document.getElementById("countdown");

    // Check if loader has been shown before
    const loaderShown = false 

    if (!loaderShown) {
      // Mark loader as shown
      localStorage.setItem("loaderShown", "true");

      let timeLeft = 5;
      countdownEl.innerText = timeLeft;

      const timer = setInterval(() => {
        timeLeft--;
        countdownEl.innerText = timeLeft;

        if (timeLeft === 0) {
          clearInterval(timer);
          overlay.style.opacity = "0";
          overlay.style.pointerEvents = "none";

          setTimeout(() => {
            overlay.style.display = "none";
          }, 400);
        }
      }, 1000);
    } else {
      // Loader already shown, hide immediately
      overlay.style.display = "none";
    }
  </script>
</body>

</html>