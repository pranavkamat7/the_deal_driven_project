<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Home</title>

  <!-- Bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">

  <!-- Common CSS -->
  <link rel="stylesheet" href="/home.css" />
  <link rel="stylesheet" href="/footer.css" />
</head>

<body>
  <div id="loadingOverlay">
    <div class="loader-box">
      <div class="spinner"></div>
      <h5>Just a moment âœ¨</h5>
      <p>Something good is opening for you</p>
      <span id="countdown">5</span>
    </div>
  </div>
  <div class="page-container">

    <!-- NAVBAR -->
    <%- include("navbar") %>

      <!-- ================= SLIDER ================= -->
      <section class="auto-slider">
        <div class="slider-track">
          <img src="/images/Banner1.png" alt="Banner 1">
          <img src="/images/Banner2.png" alt="Banner 2">
          <img src="/images/Banner1.png" alt="Banner 3">
          <img src="/images/Banner2.png" alt="Banner 2">
        </div>
      </section>

      <!-- ================= TODAY DEALS ================= -->
      <div class="container my-4">

        <div class="d-flex justify-content-between align-items-center mb-3">
          <h4 class="fw-bold mb-0">Today Deals</h4>
          <!-- <a href="#" class="text-primary text-decoration-none fw-semibold">View all</a> -->
        </div>

        <div class="products" id="productList">
          <% if (products.length===0) { %>
            <p class="no-products">No products found</p>
            <% } else { %>
              <% products.forEach((product, index)=> { %>
                <div class="product-card <%= index >= 5 ? 'd-none extra-product' : '' %>">
                  <div class="product-image">
                    <img src="<%= product.image %>" alt="<%= product.name %>">
                  </div>
                  <p class="product-name">
                    <b><%= product.name %></b>
                  </p>
                  <p class="product-name pb-5">
                    <%= product.description %>
                  </p>
                  <br>
                  <p class="product-price">â‚¹ <%= product.price %>
                  </p>
                  <a href="<%= product.link %>" class="btn btn-primary w-100">Buy Now</a>
                </div>
                <% }) %>
                  <% } %>
        </div>

        <% if (products.length> 5) { %>
          <div class="text-center mt-4">
            <button id="toggleProductsBtn" class="btn btn-outline-primary px-4">
              View More
            </button>
          </div>
          <% } %>

      </div>

      <!-- ================= FEATURE STRIP ================= -->
      <div class="container my-5">
        <div class="row text-center feature-strip">

          <div class="col">
            ðŸšš
            <p>Free Delivery</p>
            <small>On orders over â‚¹999</small>
          </div>

          <div class="col">
            ðŸ”„
            <p>90 Days Return</p>
            <small>Easy returns</small>
          </div>

          <div class="col">
            ðŸ”’
            <p>Secure Payment</p>
            <small>100% secure</small>
          </div>

          <div class="col">
            ðŸ“ž
            <p>24/7 Support</p>
            <small>Dedicated support</small>
          </div>

        </div>
      </div>

      <!-- FOOTER -->
      <%- include("footer") %>

  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    let timeLeft = 5;
    const countdownEl = document.getElementById("countdown");
    const overlay = document.getElementById("loadingOverlay");

    const timer = setInterval(() => {
      timeLeft--;
      countdownEl.innerText = timeLeft;

      if (timeLeft === 0) {
        clearInterval(timer);
        overlay.style.opacity = "0";
        overlay.style.pointerEvents = "none";

        setTimeout(() => {
          overlay.style.display = "none";
        }, 400);
      }
    }, 1000);
  </script>


  <script>
  const toggleBtn = document.getElementById("toggleProductsBtn");
  const extraProducts = document.querySelectorAll(".extra-product");

  let expanded = false;

  if (toggleBtn) {
    toggleBtn.addEventListener("click", () => {
      expanded = !expanded;

      extraProducts.forEach(product => {
        product.classList.toggle("d-none", !expanded);
      });

      toggleBtn.innerText = expanded ? "View Less" : "View More";

      if (!expanded) {
        document.getElementById("productList")
          .scrollIntoView({ behavior: "smooth" });
      }
    });
  }
</script>



</body>


</html>